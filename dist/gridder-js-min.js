(()=>{var e=function e(){var s=[].slice.call(arguments),n=!1;"boolean"==typeof s[0]&&(n=s.shift());var l=s[0];if(i(l))throw new Error("extendee must be an object");for(var r=s.slice(1),o=r.length,a=0;a<o;a++){var d=r[a];for(var h in d)if(Object.prototype.hasOwnProperty.call(d,h)){var p=d[h];if(n&&t(p)){var c=Array.isArray(p)?[]:{};l[h]=e(!0,Object.prototype.hasOwnProperty.call(l,h)&&!i(l[h])?l[h]:c,p)}else l[h]=p}}return l};function t(e){return Array.isArray(e)||"[object Object]"=={}.toString.call(e)}function i(e){return!e||"object"!=typeof e&&"function"!=typeof e}var s,n={display:"bottom",columns:8,gap:20,breakpoints:{},debug:!1,nextText:"Next",prevText:"Previous",closeText:"Close",loadingText:"Loading...",gridClass:"gridder-list",itemClass:"gridder-item",expanderClass:"gridder-show",openExpanderClass:"gridder-open",init(){},open(){},close(){}};class l{static initClass(){}constructor(t,i){let s;if(this.element=t,this.clickableElements=[],this.listeners=[],this.clickedElement=null,this.expanderElement=null,this.listElement=null,this.breakpoints=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),this.element.gridderjs)throw new Error("GridderJS already attached.");l.instances.push(this),this.element.gridderjs=this;let r=null!=(s=l.optionsForElement(this.element))?s:{};this.options=e(!0,{},n,r,null!=i?i:{}),this.#e()}#e(){this.listElement=this.element.querySelector("."+this.options.gridClass);for(let e of this.listElement.children)this.clickableElements.push(e);if(null==this.clickableElements||!this.clickableElements.length)throw new Error(`Invalid \`${this.options.gridClass}\` option provided. Please provide a CSS selector, a plain HTML element or a list of those.`);return this.clickableElements.forEach((e=>this.listeners.push({element:e,events:{click:e=>{this.#t(e)}}}))),this.#i(),l.resizeGridder(),this.#s(),this.options.init.call(this,this.element)}#i(){var t=this.options.breakpoints;if(this.breakpoints.push(["default",this.options]),t)for(const i in t)this.breakpoints.push([parseInt(i),e(!0,{},this.options,t[i])])}#s(){this.listElement.parentNode.style.display="flex",this.listElement.style.width="100%",this.listElement.style.display="grid",this.listElement.style.gridTemplateColumns="repeat("+this.options.columns+", 1fr)",this.listElement.style.gridAutoFlow="row dense",this.listElement.style.gap=this.options.gap+"px",this.listElement.style.gridTemplateRows="min-content";let e=this.element.querySelector("."+this.options.expanderClass);return e&&this.#n(e),delete this.disabled,this.clickableElements.forEach((e=>e.classList.add("gridder-item"))),this.#l()}#l(){return this.listeners.map((e=>(()=>{let t=[];for(let i in e.events){let s=e.events[i];t.push(e.element.addEventListener(i,s,!1))}return t})()))}#r(){return this.listeners.map((e=>(()=>{let t=[];for(let i in e.events){let s=e.events[i];t.push(e.element.removeEventListener(i,s,!1))}return t})()))}#o(){this.#r()}async#t(e){let t=e.target;if(t.classList.contains(this.options.itemClass)||(t=t.closest("."+this.options.itemClass)),this.expanderElement){if(t.classList.contains("active"))return this.#a(t),!1;this.#a(t)}this.listElement.querySelectorAll("."+this.options.itemClass).forEach((e=>{e.classList.remove("active")})),t.classList.add("active");let i=this.#d(t);const s=await this.#h(t);let n=this.#p(t),l=document.createElement("div");l.classList.add("gridder-content"),l.innerHTML=s,i.innerHTML="",i.appendChild(n),i.appendChild(l),this.#c(i,t),this.clickedElement=t,this.expanderElement=i,"right"===this.options.display&&(this._columns=this.options.columns,this.update({columns:this.options.columns-Math.round(this.options.columns/4)})),"bottom"===this.options.display&&t.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),this.#n(i),this.options.open.call(this)}#n(e){"right"===this.options.display&&(this.listElement.style.flex="65%",e.style.overscrollBehavior="contain",e.style.flex=" calc(35% - "+this.options.gap+"px)",e.style.position=" sticky ",e.style.alignSelf="flex-start",e.style.top=" 0 ",e.style.marginLeft=this.options.gap+"px",e.style.overflowY="scroll",e.style.overflowX="hidden",e.style.maxHeight="100vh"),"bottom"===this.options.display&&(e.style.gridColumn="1 / span "+this.options.columns,e.style.gridRow=" span 1 ")}#d=function(e){let t=document.createElement("div");return t.classList.add(this.options.expanderClass),t.classList.add("gridder-"+this.options.display),t.innerHTML=this.options.loadingText,"right"===this.options.display&&this.#u(t,this.listElement),"bottom"===this.options.display&&this.#u(t,e),e.parentNode.classList.add(this.options.openExpanderClass),t};#a=function(e){e.classList.remove("active"),this.expanderElement.remove(),e.parentNode.classList.remove(this.options.openExpanderClass),this.listElement.style.width="100%",this.update(),this.clickedElement=null,this.expanderElement=null,"right"===this.options.display&&this.update({columns:this._columns}),this.options.close.call(e)};#h=async function(e){if(e.dataset.target){let t=e.dataset.target;return document.getElementById(t).innerHTML.trim()}let t=e.dataset.url;return(await fetch(t)).text()};#p=function(e){let t=document.createElement("div");if(t.classList.add("gridder-navigation"),this.#m(e,"."+this.options.itemClass)){let e=document.createElement("a");e.classList.add("gridder-prev"),e.innerHTML=this.options.prevText,t.appendChild(e)}if(this.#f(e,"."+this.options.itemClass)){let e=document.createElement("a");e.classList.add("gridder-next"),e.innerHTML=this.options.nextText,t.appendChild(e)}let i=document.createElement("a");return i.classList.add("gridder-close"),i.innerHTML=this.options.closeText,t.appendChild(i),t};#c=function(e,t){e.querySelector(".gridder-close").addEventListener("click",(()=>{this.#a(t)}));let i=e.querySelector(".gridder-next");i&&i.addEventListener("click",(()=>{let e=this.#f(t,"."+this.options.itemClass);if(e){const t=new Event("click",{bubbles:!0});e.dispatchEvent(t)}}));let s=e.querySelector(".gridder-prev");s&&s.addEventListener("click",(()=>{let e=this.#m(t,"."+this.options.itemClass);if(e){const t=new Event("click",{bubbles:!0});e.dispatchEvent(t)}}))};#g=function(e,t){t.parentNode.prepend(e)};#u=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)};#f=function(e,t){var i=e.nextElementSibling;if(!t)return i;for(;i;){if(i.matches(t))return i;i=i.nextElementSibling}};#m=function(e,t){var i=e.previousElementSibling;if(!t)return i;for(;i;){if(i.matches(t))return i;i=i.previousElementSibling}};update(t){this._options=this.options,this.options=e(!0,{},this.options,null!=t?t:{}),this.#s()}destroy(){return this.#o(),delete this.element.gridderjs,l.instances.splice(l.instances.indexOf(this),1)}}l.options={},l.optionsForElement=function(e){return e.getAttribute("id")?l.options[camelize(e.getAttribute("id"))]:void 0},l.resizeGridder=function(){let e=window.innerWidth;l.instances.forEach((t=>{if(t.breakpoints.length<2)return!1;for(const i in t.breakpoints){if(i>0){let s=t.breakpoints[i];if(e<=s[0]){t.update(s[1]);break}}t.update(t.breakpoints[0][1])}}))},l.instances=[],"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.gridderjs=function(e){return this.each((function(){return new l(this,e)}))}),window.addEventListener("resize",(function(e){clearTimeout(s),s=setTimeout((function(){l.resizeGridder()}),500)})),window.GridderJS=l})();
//# sourceMappingURL=gridder-js-min.js.map
