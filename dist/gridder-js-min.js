(()=>{var e=function e(){var s=[].slice.call(arguments),n=!1;"boolean"==typeof s[0]&&(n=s.shift());var l=s[0];if(i(l))throw new Error("extendee must be an object");for(var r=s.slice(1),o=r.length,a=0;a<o;a++){var d=r[a];for(var c in d)if(Object.prototype.hasOwnProperty.call(d,c)){var h=d[c];if(n&&t(h)){var p=Array.isArray(h)?[]:{};l[c]=e(!0,Object.prototype.hasOwnProperty.call(l,c)&&!i(l[c])?l[c]:p,h)}else l[c]=h}}return l};function t(e){return Array.isArray(e)||"[object Object]"=={}.toString.call(e)}function i(e){return!e||"object"!=typeof e&&"function"!=typeof e}var s={display:"bottom",columns:4,gap:20,debug:!1,nextText:"Next",prevText:"Previous",closeText:"Close",loadingText:"Loading...",gridClass:"gridder-list",itemClass:"gridder-item",expanderClass:"gridder-show",openExpanderClass:"gridder-open",init(){},open(){},close(){}};class n{static initClass(){}constructor(t,i){let l;if(this.element=t,this.clickableElements=[],this.listeners=[],this.clickedElement=null,this.expanderElement=null,this.listElement=null,"string"==typeof this.element&&(this.element=document.querySelector(this.element)),this.element.gridderjs)throw new Error("GridderJS already attached.");n.instances.push(this),this.element.gridderjs=this;let r=null!=(l=n.optionsForElement(this.element))?l:{};this.options=e(!0,{},s,r,null!=i?i:{}),this.#e()}#e(){this.listElement=this.element.querySelector("."+this.options.gridClass);for(let e of this.listElement.children)this.clickableElements.push(e);if(null==this.clickableElements||!this.clickableElements.length)throw new Error(`Invalid \`${this.options.gridClass}\` option provided. Please provide a CSS selector, a plain HTML element or a list of those.`);return this.clickableElements.forEach((e=>this.listeners.push({element:e,events:{click:e=>{this.#t(e)}}}))),this.#i(),this.options.init.call(this,this.element)}#i(){this.listElement.parentNode.style.display="flex",this.listElement.style.width="100%",this.listElement.style.display="grid",this.listElement.style.gridTemplateColumns="repeat("+this.options.columns+", 1fr)",this.listElement.style.gridAutoFlow="row dense",this.listElement.style.gap=this.options.gap+"px";let e=this.element.querySelector("."+this.options.expanderClass);return e&&this.#s(e),delete this.disabled,this.clickableElements.forEach((e=>e.classList.add("gridder-item"))),this.#n()}#n(){return this.listeners.map((e=>(()=>{let t=[];for(let i in e.events){let s=e.events[i];t.push(e.element.addEventListener(i,s,!1))}return t})()))}#l(){return this.listeners.map((e=>(()=>{let t=[];for(let i in e.events){let s=e.events[i];t.push(e.element.removeEventListener(i,s,!1))}return t})()))}#r(){this.#l()}async#t(e){let t=e.target;if(t.classList.contains(this.options.itemClass)||(t=t.closest("."+this.options.itemClass)),this.expanderElement){if(t.classList.contains("active"))return this.#o(t),!1;this.#o(t)}this.listElement.querySelectorAll("."+this.options.itemClass).forEach((e=>{e.classList.remove("active")})),t.classList.add("active");let i=this.#a(t);const s=await this.#d(t);let n=this.#c(t),l=document.createElement("div");l.classList.add("gridder-content"),l.innerHTML=s,i.innerHTML="",i.appendChild(n),i.appendChild(l),this.#h(i,t),this.clickedElement=t,this.expanderElement=i,"right"===this.options.display&&(this._columns=this.options.columns,this.update({columns:this.options.columns-Math.round(this.options.columns/4)})),"bottom"===this.options.display&&t.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),this.options.open.call(this)}#s(e){"right"===this.options.display&&(this.listElement.style.flex="65%",e.style.overscrollBehavior="contain",e.style.flex=" calc(35% - "+this.options.gap+"px)",e.style.position=" sticky ",e.style.alignSelf="flex-start",e.style.top=" 0 ",e.style.marginLeft=this.options.gap+"px",e.style.overflowY="scroll",e.style.overflowX="hidden"),"bottom"===this.options.display&&(e.style.gridColumn="1 / span "+this.options.columns,e.style.gridRow=" span 1 ")}#a=function(e){let t=document.createElement("div");return t.classList.add(this.options.expanderClass),t.classList.add("gridder-"+this.options.display),t.innerHTML=this.options.loadingText,this.#s(t),"right"===this.options.display&&this.#p(t,this.listElement),"bottom"===this.options.display&&this.#p(t,e),e.parentNode.classList.add(this.options.openExpanderClass),t};#o=function(e){e.classList.remove("active"),this.expanderElement.remove(),e.parentNode.classList.remove(this.options.openExpanderClass),this.listElement.style.width="100%",this.update(),this.clickedElement=null,this.expanderElement=null,"right"===this.options.display&&this.update({columns:this._columns}),this.options.close.call(e)};#d=async function(e){if(e.dataset.target){let t=e.dataset.target;return document.getElementById(t).innerHTML.trim()}let t=e.dataset.url;return(await fetch(t)).text()};#c=function(e){let t=document.createElement("div");if(t.classList.add("gridder-navigation"),this.#m(e,"."+this.options.itemClass)){let e=document.createElement("a");e.classList.add("gridder-prev"),e.innerHTML=this.options.prevText,t.appendChild(e)}if(this.#u(e,"."+this.options.itemClass)){let e=document.createElement("a");e.classList.add("gridder-next"),e.innerHTML=this.options.nextText,t.appendChild(e)}let i=document.createElement("a");return i.classList.add("gridder-close"),i.innerHTML=this.options.closeText,t.appendChild(i),t};#h=function(e,t){e.querySelector(".gridder-close").addEventListener("click",(()=>{this.#o(t)}));let i=e.querySelector(".gridder-next");i&&i.addEventListener("click",(()=>{let e=this.#u(t,"."+this.options.itemClass);if(e){const t=new Event("click",{bubbles:!0});e.dispatchEvent(t)}}));let s=e.querySelector(".gridder-prev");s&&s.addEventListener("click",(()=>{let e=this.#m(t,"."+this.options.itemClass);if(e){const t=new Event("click",{bubbles:!0});e.dispatchEvent(t)}}))};#g=function(e,t){t.parentNode.prepend(e)};#p=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)};#u=function(e,t){var i=e.nextElementSibling;if(!t)return i;for(;i;){if(i.matches(t))return i;i=i.nextElementSibling}};#m=function(e,t){var i=e.previousElementSibling;if(!t)return i;for(;i;){if(i.matches(t))return i;i=i.previousElementSibling}};update(t){this.options=e(!0,{},this.options,null!=t?t:{}),this.#i()}destroy(){return this.#r(),delete this.element.gridderjs,n.instances.splice(n.instances.indexOf(this),1)}}n.options={},n.optionsForElement=function(e){return e.getAttribute("id")?n.options[camelize(e.getAttribute("id"))]:void 0},n.instances=[],"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.gridderjs=function(e){return this.each((function(){return new n(this,e)}))}),window.GridderJS=n})();
//# sourceMappingURL=gridder-js-min.js.map
